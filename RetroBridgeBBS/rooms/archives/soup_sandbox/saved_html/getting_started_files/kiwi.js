"use strict";var kiwi={loaded:0,interface:{saveChangesNotification:function(i){var t=i("#sl-kiwi"),e=t.find(".kiwi-notification-popup"),a=e.find("input"),n=t.find("form").find("#submit");t.find("input").on("change",function(){e.slideDown(300)}),a.on("click",function(){n.click()})},preloader:function(i){var t=i("#sl-kiwi").find(".overlay"),e=i('ul[data-id="networks_ordering_floating_bar"]');setTimeout(function(){t.find(".overlay-content").fadeOut(400,function(){t.removeClass("active").css({"z-index":0,bottom:"initial",right:"initial"}),e.css({right:"-46px",opacity:1,"z-index":1})})},1500)},colorFields:function(o){var i=o(".kiwi-styles .epsilon-ui-color input"),t=o(".kiwi-styles .epsilon-custom-colors .epsilon-ui-color input");o(".shift a");i.wpColorPicker(),o('input[name="kiwi_general_settings[styles_colors]"]:radio').change(function(){switch(o(this).val()){case"custom":o.each(t,function(){o(this).val(o(this).data("color-custom")).trigger("change")});break;case"monochrome":o.each(t,function(){o(this).val(o(this).data("color-monochrome")).trigger("change")});break;default:o.each(t,function(){o(this).val(o(this).data("color-original")).trigger("change")})}}),o.each(i,function(){var i=o(this).parents(".epsilon-ui-color"),a=i.find("em"),n=o(this),t=i.parent().parent().data("network");o(".shift").find(".kiwi-nw-"+t),n.wpColorPicker("color"),i.attr("data-prop");o(this).wpColorPicker({change:function(i,t){var e=n.wpColorPicker("color");a.html(e)}})});var a=o(".floating-bar-background input");a.length&&a.wpColorPicker({defaultColor:"#272F32",change:function(i,t){var e=a.wpColorPicker("color");o(".floating-bar-background").find("em").html(e)}}),kiwi.loaded+=1},toggleHelper:function(t){t(".epsilon-ui-option input").keypress(function(i){t(this).closest(".epsilon-ui-option").find(".epsilon-ui-overlay.active").length&&36<i.keyCode&&i.keyCode<41&&i.preventDefault()}),kiwi.loaded+=1},tabs:function(t){t('.epsilon-ui-tabs a:not([href*="admin.php?page=kiwi-upgrade"])').click(function(){if(t(this).closest("li").hasClass("selected"))return 0;var i=t(this).attr("data-tab");return t(this).closest("ul").find(".selected").removeClass("selected"),t(this).closest("li").addClass("selected"),t(".sl-kiwi-content .epsilon-tab-active").removeClass("epsilon-tab-active"),t(".sl-kiwi-content ."+i).addClass("epsilon-tab-active"),document.cookie="tab="+i,t(document).trigger("KiwiTabChanged"),!1}),kiwi.loaded+=1}},interactions:{registration:function(a){a(".kiwi-ajax-activation").on("click",function(i){i.preventDefault();var t={action:"kiwi_social_share_set_option",args:{group:"kiwi_registration",option:"license_key",default:!1,value:a(this).parent().find("#kiwi_pro_registration").val()}};jQuery.ajax({dataType:"json",type:"POST",url:ajaxurl,data:t,complete:function(i){i.responseText&&"Success"===i.responseText&&location.reload()}})}),a(".kiwi-ajax-registration-action").on("click",function(i){i.preventDefault();var t=a(this),e={action:"kiwi_social_share_edd_helper",args:{todo:a(this).attr("data-action")}};jQuery.ajax({dataType:"json",type:"POST",url:ajaxurl,data:e,complete:function(i){if(i.responseJSON.status)switch(i.responseJSON.message){case"active":t.attr("data-action","deactivate").addClass("button").removeClass("button-primary").val("Deactivate License");break;case"site_inactive":t.attr("data-action","activate").addClass("button-primary").removeClass("button").val("Activate License")}}})})},networks:function(t){t('.sl-kiwi-tab-networks .sl-kiwi-networks input[data-source="article-bar"]').on("click change",function(){var i=t(this).attr("data-list-item");t(this).is(":checked")?t('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li .'+i).closest("li").removeClass("sl-kiwi-item-remove").addClass("sl-kiwi-item-add"):t('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li .'+i).closest("li").removeClass("sl-kiwi-item-add").addClass("sl-kiwi-item-remove")}),t('.sl-kiwi-tab-networks .sl-kiwi-networks input[data-source="floating-bar"]').on("click change",function(){var i=t(this).attr("data-list-item");t(this).is(":checked")?t('.sl-kiwi-dragdrop ul[data-id="networks_ordering_floating_bar"] li .'+i).closest("li").removeClass("sl-kiwi-item-remove").addClass("sl-kiwi-item-add"):t('.sl-kiwi-dragdrop ul[data-id="networks_ordering_floating_bar"] li .'+i).closest("li").removeClass("sl-kiwi-item-add").addClass("sl-kiwi-item-remove")}),kiwi.loaded+=1},articleStyling:function(i){i('input[name="kiwi_general_settings[article_bar_style]"]:radio').change(function(){i(".sl-kiwi-dragdrop").find("[data-id='networks_ordering']").attr("data-style",this.value)})},toggles:function(t){t(".epsilon-ui-toggle input").click(function(){t(this).prop("checked")?t(this).val("on"):t(this).val("");var i=t(this).closest(".sl-kiwi-opt-group");t(this).is(":checked")?t(".epsilon-ui-overlay",i).removeClass("active"):t(".epsilon-ui-overlay",i).addClass("active")}),kiwi.loaded+=1},radioToggles:function(i){i(".sl-kiwi-radio-post-types .epsilon-ui-radio input").click(function(){"all"===i(this).val()?i(this).parent().parent().find(".epsilon-ui-checklist").slideUp():"custom"===i(this).val()&&i(this).parent().parent().find(".epsilon-ui-checklist").slideDown()}),i(".epsilon-ui-radio-toggle input").click(function(){"original"===i(this).val()?i(this).parents(".sl-kiwi-tab-networks").find(".epsilon-ui-overlay").addClass("active"):i(this).parents(".sl-kiwi-tab-networks").find(".epsilon-ui-overlay").removeClass("active")}),kiwi.loaded+=1},shapes:function(i){i('input[name="kiwi_general_settings[button_shape]"]:radio').change(function(){i(".sl-kiwi-dragdrop").find("[data-id='networks_ordering']").attr("class",this.value)}),i('input[name="kiwi_general_settings[button_shape_floating]"]:radio').change(function(){i(".sl-kiwi-dragdrop").find("[data-id='networks_ordering_floating_bar']").attr("class",this.value)}),kiwi.loaded+=1},allCheckbox:function(t){var e,i=t('input[name="kiwi_general_settings[networks_floating_bar][]"]'),a=t('input[name="kiwi_general_settings[networks_floating_bar][]"]:checked'),n=t('input[name="kiwi_general_settings[networks_article_bar][]"]'),o=t('input[name="kiwi_general_settings[networks_article_bar][]"]:checked');i.length===a.length&&t("#floating-bar-all").prop("checked",!0),n.length===o.length&&t("#social-bar-all").prop("checked",!0),t("#social-bar-all, #floating-bar-all").on("click",function(i){switch(t(this).attr("id")){case"floating-bar-all":e=t(this).prop("checked"),t('input[name="kiwi_general_settings[networks_floating_bar][]"]').prop("checked",e).change();break;default:e=t(this).prop("checked"),t('input[name="kiwi_general_settings[networks_article_bar][]"]').prop("checked",e).change()}})},sortable:function(o){o(".sl-kiwi-dragdrop ul[data-id='networks_ordering']").sortable({placeholder:"sl-kiwi-dragdrop-placeholder",stop:function(i,t){var a=[],e=o(this).attr("data-id");o('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li').each(function(i,t){var e=o(t).attr("data-item");a.push(e)});var n=a.join();o("#kiwi_"+e).val(n).trigger("change")},create:function(i,t){kiwi.loaded+=1}}).disableSelection()},upsellModalPage:function(l){var t=l(".kiwi-modal");l(".ui-locked, .epsilon-ui-locked, .epsilon-locked").on("click",function(i){t.fadeIn(200,function(){t.addClass("in")})}),l('input[name="kiwi_product_upsell[type]"]').on("change",function(){"business"===l(this).val()?l(".kiwi-modal").find(".company-group").fadeIn(300):(t.find(".company-group").fadeOut(300),t.find(".company-group input").val(""))}),l(".kiwi-modal .close-modal").on("click",function(i){i.preventDefault(),t.removeClass("in"),setTimeout(function(){t.fadeOut(200),t.find("#page-one").show(),t.find("#page-two").hide(),t.find(".modal-footer").show(),t.find(".modal-title").text(kiwi_locale.kiwi_step_one_title),t.find(".modal-subtitle").text(kiwi_locale.kiwi_step_one_subtitle)},200)}),l(".button-modal").on("click",function(i){if(i.preventDefault(),"modal-buy-now"===l(this).attr("data-action")){var t=l("#page-one"),e=l("#page-two"),a=l(".kiwi-modal .modal-footer"),n=l(".kiwi-modal .modal-header-content"),o=n.find(".modal-title"),s=n.find(".modal-subtitle");o.fadeOut(300,function(){o.text(kiwi_locale.kiwi_step_two_title),o.fadeIn(300)}),s.fadeOut(300,function(){s.text(kiwi_locale.kiwi_step_two_subtitle),s.fadeIn(300)}),a.fadeOut(300),t.fadeOut(300,function(){e.fadeIn(300)})}})},handleModalPageForm:function(o){o(".button-modal").on("click",function(i){if(i.preventDefault(),"continue-to-checkout"===o(this).attr("data-action")){var t={customer:{first_name:o('input[name="kiwi_product_upsell[first_name]"]').val(),last_name:o('input[name="kiwi_product_upsell[last_name]"]').val(),email:o('input[name="kiwi_product_upsell[email]"]').val(),vat:o('input[name="kiwi_product_upsell[vat]"]').val(),company_name:o('input[name="kiwi_product_upsell[company_name]"]').val()},product:{id:o('input[name="kiwi_product_upsell[product]"]').val(),options:{},quantity:"1"}},e=JSON.stringify(t),a=encodeURIComponent(btoa(e)),n=window.open("https://www.machothemes.com/checkout/?mthash="+a);window.focus&&n.focus()}})}},frontend:{modalPopup:function(s){s('a[data-class="popup"]').on("click",function(i){var t;i.preventDefault();var e=window.open(s(this).attr("href"),"","height=500,width=500");window.focus&&e.focus();var a,n=s(this).attr("data-network"),o=s(this).parent();return o.is("li")?(a=o.parent().attr("data-tracking-container"),t=kiwi.frontend.checkTracking(this)):o.is("blockquote")&&(a="click-to-tweet",t="true"===s(this).attr("data-tracking")),"function"==typeof ga&&!0===t&&ga("send","event","kiwi_social_media","kiwi_"+a+"_"+n+"_share"),!1})},highlighted:{start:0,end:0,url:null,title:null,content:null},highlightShare:function(o){var i=o(".kiwi-highlighter-excerpt-area, .kiwi-highlighter-content-area");o(".kiwi-highlight-sharer a").on("click",function(i){i.preventDefault();var t=kiwi.frontend.highlighted,e=null;kiwi.frontend.highlighted={},e=(e=this.href.replace("%url%",encodeURIComponent(t.url))).replace("%text%",encodeURIComponent(t.content)),window.open(e,"tweethighlight","width=575,height=430,toolbar=false,menubar=false,location=false,status=false");var a="true"===o(this).attr("data-tracking");if("function"==typeof ga&&!0===a){ga("send","event","kiwi_social_media","kiwi_highlight-to-tweet_twitter_share")}return o(".kiwi-highlight-sharer").css({display:"none"}),!1}),o("body").on("mousedown vmouseup",function(i){var t=o(i.target).parent(),e=o(".kiwi-highlight-sharer");t.hasClass("kiwi-highlight-sharer")||t.is("a")||e.is(":not(:hidden)")&&e.css({display:"none"})}),i.on("mousedown vmouseup",function(i){kiwi.frontend.highlighted.start=i.pageX;var t=o(".kiwi-highlight-sharer");t.is(":not(:hidden)")&&t.css({display:"none"})}),i.on("mouseup vmouseup",function(i){var t=kiwi.frontend.getSelected(),e=o(".kiwi-highlight-sharer");if(kiwi.frontend.highlighted.end=i.pageX,void 0!==t){var a={start:i.pageX,end:i.pageX,url:o(this).attr("data-url"),title:o(this).attr("data-title"),content:t},n=parseInt(Math.abs((kiwi.frontend.highlighted.start-kiwi.frontend.highlighted.end)/2));e.css({position:"absolute",left:i.pageX-n,top:i.pageY-50,display:"block"}),kiwi.frontend.highlighted=a}else e.css({display:"none"})}),document.addEventListener("selectionchange",function(){kiwi.frontend.getSelected()},!1)},getSelected:function(){var i=window.getSelection().toString();if(""!==i)return i},checkTracking:function(i){return"true"===jQuery(i).parents("ul").attr("data-tracking")},handleFloatingBarDisplay:function(i){var t,e=i(".kiwi-floating-bar");t=e.hasClass("bottom")?"bottom":e.hasClass("right")?"right":"left",setTimeout(function(){switch(t){case"bottom":e.css({bottom:0});break;case"right":e.css({right:0});break;default:e.css({left:0})}},300)}},init:function(i){kiwi.interface.tabs(i),kiwi.interface.toggleHelper(i),kiwi.interface.colorFields(i),kiwi.interface.saveChangesNotification(i),kiwi.interactions.toggles(i),kiwi.interactions.radioToggles(i),kiwi.interactions.networks(i),kiwi.interactions.shapes(i),kiwi.frontend.modalPopup(i),kiwi.interactions.sortable(i),kiwi.interactions.allCheckbox(i),kiwi.interactions.articleStyling(i);var t=setInterval(function(){8<=kiwi.loaded&&(i(document).trigger("KiwiObjectsLoaded"),clearInterval(t))},100)}};